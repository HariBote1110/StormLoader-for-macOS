<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>StormForge</title>
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';">
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <div id="loading-overlay"><p id="loading-message"></p></div>
    <div class="main-container">
        <div class="sidebar">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <h2 data-lang="INSTALLED_MODS">Installed Mods</h2>
                <span id="pending-indicator" style="display: none; color: var(--primary-color);" data-lang="CHANGES_PENDING">Changes pending</span>
            </div>
            <div id="mod-list-container">
                <ul id="mod-list"></ul>
            </div>
            <button id="apply-changes-btn" class="primary" data-lang="APPLY_CHANGES" style="margin-top: 15px; display: none;">Apply Changes</button>
        </div>
        <div class="main-content">
            <div class="title-bar">
                <div class="title-with-version">
                    <h1 data-lang="APP_TITLE">StormForge</h1>
                    <span id="version-display"></span>
                </div>
                <button id="settings-btn" class="icon-btn"><img src="assets/icons/settings.svg" alt="Settings"></button>
            </div>
            <div class="card">
                <h2 data-lang="SETTINGS">Settings</h2>
                <button id="set-game-dir-btn" data-lang="SET_GAME_DIR">Select Stormworks.app</button>
                <button id="backup-rom-btn" data-lang="UPDATE_VANILLA_ROM">Update Vanilla ROM Backup</button>
                <p style="margin-top: 15px;">
                    <span data-lang="GAME_ROM_DIR">Game ROM Directory:</span> 
                    <div id="game-dir-container" class="path-container">
                        <span class="placeholder-text" data-lang="CLICK_TO_SHOW_PATH">[Click to show path]</span>
                        <code id="game-dir-display" data-lang-default="NOT_SET">Not set</code>
                        <span class="eye-icon"><img src="assets/icons/eye.svg" alt="Toggle visibility"></span>
                    </div>
                </p>
            </div>
            <div class="card">
                <h2 data-lang="CONTROLS">Controls</h2>
                <div class="controls-buttons">
                    <button id="add-mod-btn" class="primary" data-lang="ADD_MOD">Add Mod (.slp)</button>
                    <button id="share-config-btn" data-lang="SHARE_CONFIG">Share Playlist</button>
                    <button id="import-from-text-btn" data-lang="IMPORT_FROM_TEXT">Import Playlist from Text</button>
                </div>
            </div>
            <div class="card">
                <h2 data-lang="PLAYLISTS">Playlists</h2>
                <div class="playlist-controls">
                    <select id="playlist-select"></select>
                    <button id="load-playlist-btn" data-lang="LOAD_PLAYLIST">Load</button>
                    <button id="rename-playlist-btn" data-lang="RENAME_PLAYLIST">Rename</button>
                    <button id="delete-playlist-btn" class="danger" data-lang="DELETE_PLAYLIST">Delete</button>
                </div>
                <div class="playlist-controls" style="margin-top: 15px;">
                    <button id="overwrite-playlist-btn" data-lang="OVERWRITE_PLAYLIST">Overwrite Selected Playlist</button>
                </div>
                <div class="playlist-controls" style="margin-top: 15px;">
                    <input type="text" id="new-playlist-name" data-lang-placeholder="NEW_PLAYLIST_NAME" placeholder="New playlist name">
                    <button id="save-playlist-btn" data-lang="SAVE_AS_NEW_PLAYLIST">Save as...</button>
                </div>
            </div>
        </div>
    </div>

    <div id="export-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h3 data-lang="SHARE_CONFIG_TITLE">Share Playlist</h3>
            <p data-lang="SHARE_CONFIG_DESC">Copy and share this playlist text with your friends.</p>
            <textarea id="export-textarea" readonly></textarea>
            <div class="modal-actions">
                <button id="copy-config-btn" class="primary" data-lang="COPY_TO_CLIPBOARD">Copy to Clipboard</button>
                <button id="close-export-modal-btn" data-lang="CLOSE">Close</button>
            </div>
        </div>
    </div>

    <div id="import-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h3 data-lang="IMPORT_CONFIG_TITLE">Import Playlist</h3>
            <p data-lang="IMPORT_CONFIG_DESC">Paste the shared playlist text below.</p>
            <textarea id="import-textarea" data-lang-placeholder="PASTE_CONFIG_HERE" placeholder="Paste playlist text here..."></textarea>
            <div class="modal-actions">
                <button id="import-config-btn" class="primary" data-lang="IMPORT">Import</button>
                <button id="close-import-modal-btn" data-lang="CANCEL">Cancel</button>
            </div>
        </div>
    </div>

    <script src="./src/renderer/renderer.js" type="module"></script>
</body>
</html>